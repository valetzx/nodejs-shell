<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NodeJS Shell ç®¡ç†é¢æ¿</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  
  <!-- Tailwind é…ç½® -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#165DFF',
            secondary: '#0FC6C2',
            accent: '#722ED1',
            dark: '#1D2129',
            light: '#F2F3F5',
            success: '#00B42A',
            warning: '#FF7D00',
            danger: '#F53F3F',
            info: '#86909C',
          },
          fontFamily: {
            inter: ['Inter', 'system-ui', 'sans-serif'],
          },
        },
      }
    }
  </script>
  
  <!-- è‡ªå®šä¹‰å·¥å…·ç±» -->
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .terminal-shadow {
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
      }
      .glass-effect {
        backdrop-filter: blur(10px);
        background-color: rgba(255, 255, 255, 0.8);
      }
      .scrollbar-thin {
        scrollbar-width: thin;
      }
      .scrollbar-thin::-webkit-scrollbar {
        width: 6px;
      }
      .scrollbar-thin::-webkit-scrollbar-thumb {
        background-color: rgba(156, 163, 175, 0.5);
        border-radius: 3px;
      }
    }
  </style>
</head>
<body class="font-inter bg-gray-50 text-dark min-h-screen flex flex-col">
  <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
  <header class="bg-white shadow-sm sticky top-0 z-50">
    <div class="container mx-auto px-4 py-3 flex items-center justify-between">
      <div class="flex items-center space-x-2">
        <i class="fa fa-terminal text-primary text-2xl"></i>
        <h1 class="text-xl font-bold text-primary">NodeJS Shell</h1>
      </div>
      <div class="flex items-center space-x-4">
        <button id="theme-toggle" class="p-2 rounded-full hover:bg-gray-100 transition-colors">
          <i class="fa fa-moon-o text-gray-600"></i>
        </button>
        <button id="help-btn" class="p-2 rounded-full hover:bg-gray-100 transition-colors">
          <i class="fa fa-question-circle text-gray-600"></i>
        </button>
      </div>
    </div>
  </header>

  <!-- ä¸»å†…å®¹åŒº -->
  <main class="flex-1 container mx-auto px-4 py-6">
    <!-- ç»Ÿè®¡å¡ç‰‡ -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
      <div class="bg-white rounded-xl shadow-md p-6 transform hover:scale-105 transition-all duration-300">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-gray-500 text-sm">ç³»ç»Ÿè´Ÿè½½</p>
            <h3 class="text-2xl font-bold mt-1">
              <span id="cpu-load">0%</span>
            </h3>
          </div>
          <div class="bg-blue-100 p-3 rounded-lg">
            <i class="fa fa-microchip text-primary text-xl"></i>
          </div>
        </div>
        <div class="mt-4 h-2 bg-gray-100 rounded-full overflow-hidden">
          <div id="cpu-bar" class="h-full bg-primary rounded-full" style="width: 0%"></div>
        </div>
      </div>
      
      <div class="bg-white rounded-xl shadow-md p-6 transform hover:scale-105 transition-all duration-300">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-gray-500 text-sm">å†…å­˜ä½¿ç”¨</p>
            <h3 class="text-2xl font-bold mt-1">
              <span id="mem-usage">0 MB</span>
            </h3>
          </div>
          <div class="bg-purple-100 p-3 rounded-lg">
            <i class="fa fa-memory text-accent text-xl"></i>
          </div>
        </div>
        <div class="mt-4 h-2 bg-gray-100 rounded-full overflow-hidden">
          <div id="mem-bar" class="h-full bg-accent rounded-full" style="width: 0%"></div>
        </div>
      </div>
      
      <div class="bg-white rounded-xl shadow-md p-6 transform hover:scale-105 transition-all duration-300">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-gray-500 text-sm">å­˜å‚¨</p>
            <h3 class="text-2xl font-bold mt-1">
              <span id="disk-usage">0 GB</span>
            </h3>
          </div>
          <div class="bg-green-100 p-3 rounded-lg">
            <i class="fa fa-hdd-o text-success text-xl"></i>
          </div>
        </div>
        <div class="mt-4 h-2 bg-gray-100 rounded-full overflow-hidden">
          <div id="disk-bar" class="h-full bg-success rounded-full" style="width: 0%"></div>
        </div>
      </div>
    </div>
    
    <!-- ä¸»è¦åŠŸèƒ½åŒº -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
      <!-- ç»ˆç«¯é¢æ¿ -->
      <div class="lg:col-span-2 space-y-6">
        <div class="bg-white rounded-xl shadow-md overflow-hidden">
          <div class="bg-gray-800 text-white p-3 flex items-center justify-between">
            <div class="flex items-center space-x-2">
              <div class="flex space-x-1">
                <div class="w-3 h-3 rounded-full bg-red-500"></div>
                <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                <div class="w-3 h-3 rounded-full bg-green-500"></div>
              </div>
              <span class="ml-2 font-medium">Bash ç»ˆç«¯</span>
            </div>
            <div class="flex space-x-2">
              <button id="clear-terminal" class="text-gray-400 hover:text-white transition-colors">
                <i class="fa fa-trash-o"></i>
              </button>
              <button id="maximize-terminal" class="text-gray-400 hover:text-white transition-colors">
                <i class="fa fa-expand"></i>
              </button>
            </div>
          </div>
          
          <div id="terminal-output" class="h-80 bg-gray-900 text-gray-200 p-4 overflow-y-auto scrollbar-thin">
            <div class="text-gray-400 mb-2">
              <span class="text-green-400">root@nodejs-shell</span>:<span class="text-blue-400">~</span># <span class="text-white">date</span>
            </div>
            <div class="mb-4">
              ${new Date().toLocaleString()}
            </div>
            <div class="text-gray-400">
              <span class="text-green-400">root@nodejs-shell</span>:<span class="text-blue-400">~</span># 
            </div>
          </div>
          
          <div class="p-4 bg-gray-800">
            <div class="flex space-x-2">
              <div class="text-green-400 font-medium">root@nodejs-shell:~#</div>
              <div class="flex-1">
                <input 
                  type="text" 
                  id="terminal-input" 
                  placeholder="è¾“å…¥å‘½ä»¤..." 
                  class="w-full bg-gray-700 text-white border-none focus:ring-2 focus:ring-primary rounded-md px-3 py-2 outline-none"
                >
              </div>
              <button id="run-command" class="bg-primary hover:bg-primary/90 text-white px-4 py-2 rounded-md transition-colors">
                <i class="fa fa-play mr-1"></i> æ‰§è¡Œ
              </button>
            </div>
            
            <div class="mt-3 flex items-center space-x-2">
              <label class="flex items-center space-x-1 text-gray-300">
                <input type="checkbox" id="admin-checkbox" class="rounded text-primary focus:ring-primary">
                <span>ç®¡ç†å‘˜æ¨¡å¼</span>
              </label>
              <div id="admin-password-container" class="hidden flex-1">
                <input 
                  type="password" 
                  id="admin-password" 
                  placeholder="è¾“å…¥ç®¡ç†å‘˜å¯†ç " 
                  class="w-full bg-gray-700 text-white border-none focus:ring-2 focus:ring-primary rounded-md px-3 py-1 outline-none text-sm"
                >
              </div>
            </div>
          </div>
        </div>
        
        <!-- å¸¸ç”¨å‘½ä»¤å¿«æ·æ–¹å¼ -->
        <div class="bg-white rounded-xl shadow-md p-4">
          <h3 class="font-bold text-lg mb-3 flex items-center">
            <i class="fa fa-bolt text-primary mr-2"></i> å¸¸ç”¨å‘½ä»¤
          </h3>
          <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2">
            <button class="command-shortcut bg-gray-100 hover:bg-gray-200 p-2 rounded-md transition-colors text-sm flex items-center justify-center" data-command="ls -la">
              <i class="fa fa-list-ul mr-1"></i> åˆ—å‡ºæ–‡ä»¶
            </button>
            <button class="command-shortcut bg-gray-100 hover:bg-gray-200 p-2 rounded-md transition-colors text-sm flex items-center justify-center" data-command="df -h">
              <i class="fa fa-hdd-o mr-1"></i> ç£ç›˜ç©ºé—´
            </button>
            <button class="command-shortcut bg-gray-100 hover:bg-gray-200 p-2 rounded-md transition-colors text-sm flex items-center justify-center" data-command="free -m">
              <i class="fa fa-memory mr-1"></i> å†…å­˜ä½¿ç”¨
            </button>
            <button class="command-shortcut bg-gray-100 hover:bg-gray-200 p-2 rounded-md transition-colors text-sm flex items-center justify-center" data-command="ps aux">
              <i class="fa fa-tasks mr-1"></i> è¿›ç¨‹åˆ—è¡¨
            </button>
            <button class="command-shortcut bg-gray-100 hover:bg-gray-200 p-2 rounded-md transition-colors text-sm flex items-center justify-center" data-command="netstat -tuln">
              <i class="fa fa-wifi mr-1"></i> ç½‘ç»œè¿æ¥
            </button>
            <button class="command-shortcut bg-gray-100 hover:bg-gray-200 p-2 rounded-md transition-colors text-sm flex items-center justify-center" data-command="uptime">
              <i class="fa fa-clock-o mr-1"></i> è¿è¡Œæ—¶é—´
            </button>
            <button class="command-shortcut bg-gray-100 hover:bg-gray-200 p-2 rounded-md transition-colors text-sm flex items-center justify-center" data-command="top">
              <i class="fa fa-line-chart mr-1"></i> ç³»ç»Ÿç›‘æ§
            </button>
            <button class="command-shortcut bg-gray-100 hover:bg-gray-200 p-2 rounded-md transition-colors text-sm flex items-center justify-center" data-command="hostname -I">
              <i class="fa fa-server mr-1"></i> IP åœ°å€
            </button>
          </div>
        </div>
      </div>
      
      <!-- æ–‡ä»¶ç®¡ç†é¢æ¿ -->
      <div class="space-y-6">
        <!-- æ–‡ä»¶æµè§ˆå™¨ -->
        <div class="bg-white rounded-xl shadow-md overflow-hidden">
          <div class="bg-primary text-white p-3 flex items-center justify-between">
            <div class="flex items-center">
              <i class="fa fa-folder-open mr-2"></i>
              <h3 class="font-medium">æ–‡ä»¶ç®¡ç†</h3>
            </div>
            <div class="flex space-x-2">
              <button id="refresh-files" class="text-white hover:text-gray-200 transition-colors">
                <i class="fa fa-refresh"></i>
              </button>
            </div>
          </div>
          
          <!-- å½“å‰è·¯å¾„ -->
          <div class="p-3 bg-gray-50 border-b">
            <div class="flex items-center text-sm">
              <i class="fa fa-map-marker text-gray-400 mr-2"></i>
              <span id="current-path" class="text-gray-700">/</span>
            </div>
          </div>
          
          <!-- æ–‡ä»¶åˆ—è¡¨ -->
          <div id="file-list-container" class="h-96 overflow-y-auto scrollbar-thin">
            <div class="p-4 flex items-center justify-center text-gray-500">
              <i class="fa fa-spinner fa-spin mr-2"></i>
              <span>åŠ è½½æ–‡ä»¶åˆ—è¡¨...</span>
            </div>
          </div>
          
          <!-- æ–‡ä»¶æ“ä½œ -->
          <div class="p-3 bg-gray-50 border-t">
            <div class="flex justify-between items-center">
              <div class="flex space-x-2">
                <button id="upload-file-btn" class="bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 px-3 py-1 rounded-md transition-colors text-sm flex items-center">
                  <i class="fa fa-upload mr-1"></i> ä¸Šä¼ 
                </button>
                <button id="new-folder-btn" class="bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 px-3 py-1 rounded-md transition-colors text-sm flex items-center">
                  <i class="fa fa-folder-plus mr-1"></i> æ–°å»º
                </button>
              </div>
              <div class="text-xs text-gray-500">
                <span id="file-count">0</span> ä¸ªæ–‡ä»¶
              </div>
            </div>
            
            <!-- ä¸Šä¼ æ–‡ä»¶è¡¨å• -->
            <div id="upload-file-form" class="mt-3 hidden">
              <form id="upload-form" enctype="multipart/form-data">
                <div class="flex space-x-2">
                  <input 
                    type="file" 
                    id="file-upload-input" 
                    class="hidden" 
                    multiple
                  >
                  <input 
                    type="text" 
                    id="file-upload-display" 
                    placeholder="é€‰æ‹©æ–‡ä»¶..." 
                    class="flex-1 bg-white border border-gray-300 rounded-md px-3 py-1 outline-none text-sm cursor-pointer"
                    readonly
                  >
                  <button type="button" id="select-files-btn" class="bg-primary hover:bg-primary/90 text-white px-3 py-1 rounded-md transition-colors text-sm">
                    æµè§ˆ
                  </button>
                  <button type="submit" class="bg-success hover:bg-success/90 text-white px-3 py-1 rounded-md transition-colors text-sm">
                    ä¸Šä¼ 
                  </button>
                </div>
                <div class="mt-2">
                  <input 
                    type="password" 
                    id="upload-password" 
                    placeholder="è¾“å…¥ä¸Šä¼ å¯†ç " 
                    class="w-full bg-white border border-gray-300 rounded-md px-3 py-1 outline-none text-sm"
                  >
                </div>
              </form>
            </div>
            
            <!-- æ–°å»ºæ–‡ä»¶å¤¹è¡¨å• -->
            <div id="new-folder-form" class="mt-3 hidden">
              <form id="folder-form">
                <div class="flex space-x-2">
                  <input 
                    type="text" 
                    id="folder-name" 
                    placeholder="æ–‡ä»¶å¤¹åç§°" 
                    class="flex-1 bg-white border border-gray-300 rounded-md px-3 py-1 outline-none text-sm"
                  >
                  <button type="submit" class="bg-primary hover:bg-primary/90 text-white px-3 py-1 rounded-md transition-colors text-sm">
                    åˆ›å»º
                  </button>
                </div>
                <div class="mt-2">
                  <input 
                    type="password" 
                    id="folder-password" 
                    placeholder="è¾“å…¥ç®¡ç†å‘˜å¯†ç " 
                    class="w-full bg-white border border-gray-300 rounded-md px-3 py-1 outline-none text-sm"
                  >
                </div>
              </form>
            </div>
          </div>
        </div>
        
        <!-- ç³»ç»Ÿä¿¡æ¯ -->
        <div class="bg-white rounded-xl shadow-md p-4">
          <h3 class="font-bold text-lg mb-3 flex items-center">
            <i class="fa fa-info-circle text-primary mr-2"></i> ç³»ç»Ÿä¿¡æ¯
          </h3>
          <div class="space-y-3">
            <div>
              <p class="text-sm text-gray-500">ä¸»æœºå</p>
              <p id="system-hostname" class="font-medium">loading...</p>
            </div>
            <div>
              <p class="text-sm text-gray-500">æ“ä½œç³»ç»Ÿ</p>
              <p id="system-os" class="font-medium">loading...</p>
            </div>
            <div>
              <p class="text-sm text-gray-500">IP åœ°å€</p>
              <p id="system-ip" class="font-medium">loading...</p>
            </div>
            <div>
              <p class="text-sm text-gray-500">è¿è¡Œæ—¶é—´</p>
              <p id="system-uptime" class="font-medium">loading...</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- é¡µè„š -->
  <footer class="bg-white border-t mt-8 py-4">
    <div class="container mx-auto px-4 text-center text-gray-500 text-sm">
      <p>NodeJS Shell &copy; 2023 | <a href="#" class="text-primary hover:underline">æŸ¥çœ‹æ–‡æ¡£</a></p>
    </div>
  </footer>

  <!-- æ¨¡æ€æ¡† -->
  <div id="modal" class="fixed inset-0 bg-black/50 z-50 flex items-center justify-center hidden">
    <div class="bg-white rounded-xl shadow-lg max-w-md w-full mx-4 transform transition-all scale-95 opacity-0" id="modal-content">
      <div class="p-4 border-b">
        <h3 id="modal-title" class="text-lg font-bold">æ“ä½œç¡®è®¤</h3>
      </div>
      <div id="modal-body" class="p-4">
        <p>æ‚¨ç¡®å®šè¦æ‰§è¡Œæ­¤æ“ä½œå—ï¼Ÿ</p>
      </div>
      <div class="p-4 border-t flex justify-end space-x-3">
        <button id="modal-cancel" class="px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-md transition-colors">
          å–æ¶ˆ
        </button>
        <button id="modal-confirm" class="px-4 py-2 bg-primary hover:bg-primary/90 text-white rounded-md transition-colors">
          ç¡®è®¤
        </button>
      </div>
    </div>
  </div>

  <script>
    // æ¨¡æ‹Ÿç³»ç»Ÿæ•°æ®
    const mockSystemData = {
      cpuLoad: 25,
      memUsage: 1500,
      memTotal: 4096,
      diskUsage: 5.8,
      diskTotal: 20,
      hostname: "nodejs-server",
      os: "Linux 5.15.0-78-generic",
      ip: "192.168.1.100",
      uptime: "2 å¤© 14 å°æ—¶ 35 åˆ†é’Ÿ"
    };
    
    // æ¨¡æ‹Ÿæ–‡ä»¶åˆ—è¡¨
    const mockFiles = [
      { name: "index.js", type: "file", size: "12 KB", modified: "2023-06-10 14:30" },
      { name: "package.json", type: "file", size: "3 KB", modified: "2023-06-09 09:15" },
      { name: "logs", type: "folder", size: "-", modified: "2023-06-10 16:45" },
      { name: "uploads", type: "folder", size: "-", modified: "2023-06-08 11:20" },
      { name: "README.md", type: "file", size: "2 KB", modified: "2023-06-05 15:00" },
      { name: "data.json", type: "file", size: "8 KB", modified: "2023-06-07 10:45" },
      { name: "public", type: "folder", size: "-", modified: "2023-06-03 08:30" },
      { name: "node_modules", type: "folder", size: "-", modified: "2023-06-01 17:20" },
    ];
    
    // DOM å…ƒç´ 
    const terminalOutput = document.getElementById('terminal-output');
    const terminalInput = document.getElementById('terminal-input');
    const runCommandBtn = document.getElementById('run-command');
    const adminCheckbox = document.getElementById('admin-checkbox');
    const adminPasswordContainer = document.getElementById('admin-password-container');
    const adminPassword = document.getElementById('admin-password');
    const clearTerminalBtn = document.getElementById('clear-terminal');
    const commandShortcuts = document.querySelectorAll('.command-shortcut');
    const fileListContainer = document.getElementById('file-list-container');
    const currentPath = document.getElementById('current-path');
    const fileCount = document.getElementById('file-count');
    const uploadFileBtn = document.getElementById('upload-file-btn');
    const uploadFileForm = document.getElementById('upload-file-form');
    const newFolderBtn = document.getElementById('new-folder-btn');
    const newFolderForm = document.getElementById('new-folder-form');
    const fileUploadInput = document.getElementById('file-upload-input');
    const fileUploadDisplay = document.getElementById('file-upload-display');
    const selectFilesBtn = document.getElementById('select-files-btn');
    const uploadForm = document.getElementById('upload-form');
    const folderForm = document.getElementById('folder-form');
    const folderName = document.getElementById('folder-name');
    const refreshFilesBtn = document.getElementById('refresh-files');
    const modal = document.getElementById('modal');
    const modalContent = document.getElementById('modal-content');
    const modalTitle = document.getElementById('modal-title');
    const modalBody = document.getElementById('modal-body');
    const modalCancel = document.getElementById('modal-cancel');
    const modalConfirm = document.getElementById('modal-confirm');
    const themeToggle = document.getElementById('theme-toggle');
    
    // å½“å‰å·¥ä½œè·¯å¾„
    let currentDir = '';
    
    // åˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', () => {
      // åŠ è½½ç³»ç»Ÿæ•°æ®
      loadSystemData();
      
      // åŠ è½½æ–‡ä»¶åˆ—è¡¨
      loadFileList();
      
      // äº‹ä»¶ç›‘å¬å™¨
      runCommandBtn.addEventListener('click', executeCommand);
      terminalInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') executeCommand();
      });
      adminCheckbox.addEventListener('change', toggleAdminMode);
      clearTerminalBtn.addEventListener('click', clearTerminal);
      commandShortcuts.forEach(btn => {
        btn.addEventListener('click', () => {
          terminalInput.value = btn.dataset.command;
          executeCommand();
        });
      });
      uploadFileBtn.addEventListener('click', () => {
        uploadFileForm.classList.toggle('hidden');
        newFolderForm.classList.add('hidden');
      });
      newFolderBtn.addEventListener('click', () => {
        newFolderForm.classList.toggle('hidden');
        uploadFileForm.classList.add('hidden');
      });
      selectFilesBtn.addEventListener('click', () => {
        fileUploadInput.click();
      });
      fileUploadInput.addEventListener('change', () => {
        if (fileUploadInput.files.length === 1) {
          fileUploadDisplay.value = fileUploadInput.files[0].name;
        } else if (fileUploadInput.files.length > 1) {
          fileUploadDisplay.value = `${fileUploadInput.files.length} ä¸ªæ–‡ä»¶`;
        }
      });
      uploadForm.addEventListener('submit', uploadFiles);
      folderForm.addEventListener('submit', createFolder);
      refreshFilesBtn.addEventListener('click', loadFileList);
      modalCancel.addEventListener('click', closeModal);
      modalConfirm.addEventListener('click', confirmModalAction);
      themeToggle.addEventListener('click', toggleTheme);
    });
    
    // åŠ è½½ç³»ç»Ÿæ•°æ®
    function loadSystemData() {
      // åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™äº›æ•°æ®ä¼šé€šè¿‡ API è·å–
      document.getElementById('cpu-load').textContent = `${mockSystemData.cpuLoad}%`;
      document.getElementById('mem-usage').textContent = `${mockSystemData.memUsage} MB / ${mockSystemData.memTotal} MB`;
      document.getElementById('disk-usage').textContent = `${mockSystemData.diskUsage} GB / ${mockSystemData.diskTotal} GB`;
      document.getElementById('system-hostname').textContent = mockSystemData.hostname;
      document.getElementById('system-os').textContent = mockSystemData.os;
      document.getElementById('system-ip').textContent = mockSystemData.ip;
      document.getElementById('system-uptime').textContent = mockSystemData.uptime;
      
      // æ›´æ–°è¿›åº¦æ¡
      document.getElementById('cpu-bar').style.width = `${mockSystemData.cpuLoad}%`;
      document.getElementById('mem-bar').style.width = `${(mockSystemData.memUsage / mockSystemData.memTotal) * 100}%`;
      document.getElementById('disk-bar').style.width = `${(mockSystemData.diskUsage / mockSystemData.diskTotal) * 100}%`;
    }
    
    // åŠ è½½æ–‡ä»¶åˆ—è¡¨
    function loadFileList() {
      // åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œä¼šè°ƒç”¨ /file API
      fileListContainer.innerHTML = `
        <div class="p-4 flex items-center justify-center text-gray-500">
          <i class="fa fa-spinner fa-spin mr-2"></i>
          <span>åŠ è½½æ–‡ä»¶åˆ—è¡¨...</span>
        </div>
      `;
      
      // æ¨¡æ‹Ÿ API è¯·æ±‚å»¶è¿Ÿ
      setTimeout(() => {
        renderFileList(mockFiles);
      }, 500);
    }
    
    // æ¸²æŸ“æ–‡ä»¶åˆ—è¡¨
    function renderFileList(files) {
      if (!files || files.length === 0) {
        fileListContainer.innerHTML = `
          <div class="p-4 flex items-center justify-center text-gray-500">
            <i class="fa fa-folder-open-o mr-2"></i>
            <span>æ­¤æ–‡ä»¶å¤¹ä¸ºç©º</span>
          </div>
        `;
        fileCount.textContent = "0";
        return;
      }
      
      // æŒ‰ç±»å‹åˆ†ç»„ï¼šæ–‡ä»¶å¤¹åœ¨å‰ï¼Œæ–‡ä»¶åœ¨å
      const folders = files.filter(item => item.type === 'folder');
      const fileItems = files.filter(item => item.type === 'file');
      
      // æ’åº
      folders.sort((a, b) => a.name.localeCompare(b.name));
      fileItems.sort((a, b) => a.name.localeCompare(b.name));
      
      // åˆå¹¶å¹¶æ¸²æŸ“
      const allItems = [...folders, ...fileItems];
      
      let html = '';
      allItems.forEach(item => {
        const icon = item.type === 'folder' 
          ? '<i class="fa fa-folder text-yellow-500 mr-2"></i>' 
          : '<i class="fa fa-file-o text-gray-400 mr-2"></i>';
        
        html += `
          <div class="file-item p-3 hover:bg-gray-50 transition-colors border-b last:border-b-0 flex items-center justify-between cursor-pointer" data-name="${item.name}" data-type="${item.type}">
            <div class="flex items-center">
              ${icon}
              <span class="font-medium">${item.name}</span>
            </div>
            <div class="flex items-center space-x-4 text-sm text-gray-500">
              <span>${item.size}</span>
              <span>${item.modified}</span>
              <div class="file-actions opacity-0 hover:opacity-100 transition-opacity flex space-x-2">
                ${item.type === 'folder' ? '' : `
                  <button class="text-primary hover:text-primary/80 download-file" data-name="${item.name}">
                    <i class="fa fa-download"></i>
                  </button>
                `}
                <button class="text-danger hover:text-danger/80 delete-item" data-name="${item.name}" data-type="${item.type}">
                  <i class="fa fa-trash-o"></i>
                </button>
              </div>
            </div>
          </div>
        `;
      });
      
      fileListContainer.innerHTML = html;
      fileCount.textContent = allItems.length;
      
      // æ·»åŠ ç‚¹å‡»äº‹ä»¶
      document.querySelectorAll('.file-item').forEach(item => {
        item.addEventListener('click', () => {
          const name = item.dataset.name;
          const type = item.dataset.type;
          
          if (type === 'folder') {
            // å¯¼èˆªåˆ°å­æ–‡ä»¶å¤¹
            currentDir = currentDir ? `${currentDir}/${name}` : name;
            currentPath.textContent = `/${currentDir}`;
            loadFileList();
          }
        });
      });
      
      // æ·»åŠ ä¸‹è½½å’Œåˆ é™¤äº‹ä»¶
      document.querySelectorAll('.download-file').forEach(btn => {
        btn.addEventListener('click', (e) => {
          e.stopPropagation();
          const fileName = btn.dataset.name;
          // åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œä¼šè°ƒç”¨ä¸‹è½½ API
          alert(`ä¸‹è½½æ–‡ä»¶: ${fileName}`);
        });
      });
      
      document.querySelectorAll('.delete-item').forEach(btn => {
        btn.addEventListener('click', (e) => {
          e.stopPropagation();
          const name = btn.dataset.name;
          const type = btn.dataset.type;
          
          modalTitle.textContent = type === 'folder' ? 'åˆ é™¤æ–‡ä»¶å¤¹' : 'åˆ é™¤æ–‡ä»¶';
          modalBody.innerHTML = `
            <p class="text-gray-700">æ‚¨ç¡®å®šè¦åˆ é™¤ ${type === 'folder' ? 'æ–‡ä»¶å¤¹' : 'æ–‡ä»¶'} <span class="font-medium">${name}</span> å—ï¼Ÿ</p>
            <p class="text-sm text-red-500 mt-2">æ­¤æ“ä½œä¸å¯æ’¤é”€ï¼</p>
          `;
          
          // è®¾ç½®ç¡®è®¤æŒ‰é’®çš„å›è°ƒ
          modalConfirm.onclick = () => {
            // åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œä¼šè°ƒç”¨åˆ é™¤ API
            alert(`åˆ é™¤ ${type === 'folder' ? 'æ–‡ä»¶å¤¹' : 'æ–‡ä»¶'}: ${name}`);
            loadFileList();
            closeModal();
          };
          
          openModal();
        });
      });
    }
    
    // æ‰§è¡Œå‘½ä»¤
    function executeCommand() {
      const command = terminalInput.value.trim();
      if (!command) return;
      
      // æ·»åŠ å‘½ä»¤åˆ°ç»ˆç«¯
      const commandElement = document.createElement('div');
      commandElement.className = 'text-gray-400 mb-2';
      commandElement.innerHTML = `<span class="text-green-400">root@nodejs-shell</span>:<span class="text-blue-400">~</span># <span class="text-white">${command}</span>`;
      terminalOutput.appendChild(commandElement);
      
      // æ¸…ç©ºè¾“å…¥æ¡†
      terminalInput.value = '';
      
      // åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œä¼šè°ƒç”¨ /bash API
      const outputElement = document.createElement('div');
      outputElement.className = 'mb-4';
      
      // æ¨¡æ‹Ÿå‘½ä»¤æ‰§è¡Œ
      if (command === 'ls' || command === 'ls -la') {
        // æ˜¾ç¤ºæ–‡ä»¶åˆ—è¡¨
        outputElement.innerHTML = mockFiles.map(file => {
          const icon = file.type === 'folder' ? 'ğŸ“' : 'ğŸ“„';
          return `${icon} ${file.name}${file.type === 'file' ? ` (${file.size})` : ''}`;
        }).join('\n');
      } else if (command === 'df -h') {
        // æ˜¾ç¤ºç£ç›˜ç©ºé—´
        outputElement.innerHTML = `Filesystem      Size  Used Avail Use% Mounted on\n/dev/sda1        20G   5.8G   14G  30% /`;
      } else if (command === 'free -m') {
        // æ˜¾ç¤ºå†…å­˜ä½¿ç”¨
        outputElement.innerHTML = `              total        used        free      shared  buff/cache   available\nMem:           4096        1500        1200         200        1396        2500\nSwap:          2048           0        2048`;
      } else if (command === 'ps aux') {
        // æ˜¾ç¤ºè¿›ç¨‹åˆ—è¡¨
        outputElement.innerHTML = `USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\nroot         1  0.0  0.1  12568  3200 ?        Ss   Jun01   0:04 /sbin/init\nroot         2  0.0  0.0      0     0 ?        S    Jun01   0:00 [kthreadd]\n...`;
      } else if (command === 'hostname -I') {
        // æ˜¾ç¤º IP åœ°å€
        outputElement.innerHTML = mockSystemData.ip;
      } else if (command === 'uptime') {
        // æ˜¾ç¤ºè¿è¡Œæ—¶é—´
        outputElement.innerHTML = mockSystemData.uptime;
      } else {
        // æœªçŸ¥å‘½ä»¤
        outputElement.innerHTML = `bash: ${command}: command not found`;
      }
      
      terminalOutput.appendChild(outputElement);
      
      // æ·»åŠ æ–°çš„å‘½ä»¤æç¤ºç¬¦
      const promptElement = document.createElement('div');
      promptElement.className = 'text-gray-400';
      promptElement.innerHTML = `<span class="text-green-400">root@nodejs-shell</span>:<span class="text-blue-400">~</span># `;
      terminalOutput.appendChild(promptElement);
      
      // æ»šåŠ¨åˆ°åº•éƒ¨
      terminalOutput.scrollTop = terminalOutput.scrollHeight;
    }
    
    // åˆ‡æ¢ç®¡ç†å‘˜æ¨¡å¼
    function toggleAdminMode() {
      adminPasswordContainer.classList.toggle('hidden', !adminCheckbox.checked);
    }
    
    // æ¸…ç©ºç»ˆç«¯
    function clearTerminal() {
      terminalOutput.innerHTML = `
        <div class="text-gray-400">
          <span class="text-green-400">root@nodejs-shell</span>:<span class="text-blue-400">~</span># 
        </div>
      `;
    }
    
    // ä¸Šä¼ æ–‡ä»¶
    function uploadFiles(e) {
      e.preventDefault();
      
      const password = document.getElementById('upload-password').value.trim();
      if (!password) {
        alert('è¯·è¾“å…¥ä¸Šä¼ å¯†ç ');
        return;
      }
      
      if (!fileUploadInput.files.length) {
        alert('è¯·é€‰æ‹©è¦ä¸Šä¼ çš„æ–‡ä»¶');
        return;
      }
      
      // åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œä¼šè°ƒç”¨ä¸Šä¼  API
      alert(`ä¸Šä¼  ${fileUploadInput.files.length} ä¸ªæ–‡ä»¶...`);
      
      // é‡ç½®è¡¨å•
      uploadFileForm.classList.add('hidden');
      fileUploadInput.value = '';
      fileUploadDisplay.value = '';
      document.getElementById('upload-password').value = '';
      
      // åˆ·æ–°æ–‡ä»¶åˆ—è¡¨
      loadFileList();
    }
    
    // åˆ›å»ºæ–‡ä»¶å¤¹
    function createFolder(e) {
      e.preventDefault();
      
      const name = folderName.value.trim();
      const password = document.getElementById('folder-password').value.trim();
      
      if (!name) {
        alert('è¯·è¾“å…¥æ–‡ä»¶å¤¹åç§°');
        return;
      }
      
      if (!password) {
        alert('è¯·è¾“å…¥ç®¡ç†å‘˜å¯†ç ');
        return;
      }
      
      // åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œä¼šè°ƒç”¨åˆ›å»ºæ–‡ä»¶å¤¹ API
      alert(`åˆ›å»ºæ–‡ä»¶å¤¹: ${name}`);
      
      // é‡ç½®è¡¨å•
      newFolderForm.classList.add('hidden');
      folderName.value = '';
      document.getElementById('folder-password').value = '';
      
      // åˆ·æ–°æ–‡ä»¶åˆ—è¡¨
      loadFileList();
    }
    
    // æ‰“å¼€æ¨¡æ€æ¡†
    function openModal() {
      modal.classList.remove('hidden');
      setTimeout(() => {
        modalContent.classList.remove('scale-95', 'opacity-0');
        modalContent.classList.add('scale-100', 'opacity-100');
      }, 10);
    }
    
    // å…³é—­æ¨¡æ€æ¡†
    function closeModal() {
      modalContent.classList.remove('scale-100', 'opacity-100');
      modalContent.classList.add('scale-95', 'opacity-0');
      setTimeout(() => {
        modal.classList.add('hidden');
      }, 200);
    }
    
    // ç¡®è®¤æ¨¡æ€æ¡†æ“ä½œ
    function confirmModalAction() {
      // æ“ä½œå°†åœ¨ç‚¹å‡»æŒ‰é’®æ—¶è®¾ç½®
      closeModal();
    }
    
    // åˆ‡æ¢ä¸»é¢˜
    function toggleTheme() {
      const icon = themeToggle.querySelector('i');
      if (icon.classList.contains('fa-moon-o')) {
        icon.classList.remove('fa-moon-o');
        icon.classList.add('fa-sun-o');
        document.body.classList.add('dark-mode');
        // åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œä¼šåˆ‡æ¢æ·±è‰²ä¸»é¢˜
      } else {
        icon.classList.remove('fa-sun-o');
        icon.classList.add('fa-moon-o');
        document.body.classList.remove('dark-mode');
        // åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œä¼šåˆ‡æ¢æµ…è‰²ä¸»é¢˜
      }
    }
  </script>
</body>
</html>
